import{s as ue,r as Pe,o as ye,n as De}from"../chunks/scheduler.mhZtr3qf.js";import{S as de,i as he,e as v,t as H,s as R,v as Q,c as w,a as D,b as M,d as m,f as F,w as X,k as oe,l as E,g as z,h as o,x as Z,j as K,p as L,n as V,y as x,B as Se,H as Ne,C as Ie,D as _e,r as Re,o as Fe}from"../chunks/index.By0cP33f.js";import{F as re,a as be,b as Te,c as Ae,l as ve,d as ke}from"../chunks/index.CXMAs4hD.js";function we(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ee(t,e,s){const c=t.slice();return c[14]=e[s],c[16]=s,c}function $e(t){let e,s,c=t[14]+"",n,i,l,h=ae(t[1][t[16]])+"",_,f,T,A,p=ae(t[2][t[16]])+"",P,y,S;return{c(){e=v("tr"),s=v("td"),n=H(c),i=R(),l=v("td"),_=H(h),T=R(),A=v("td"),P=H(p),S=R(),this.h()},l(u){e=w(u,"TR",{});var a=D(e);s=w(a,"TD",{});var $=D(s);n=M($,c),$.forEach(m),i=F(a),l=w(a,"TD",{class:!0});var d=D(l);_=M(d,h),d.forEach(m),T=F(a),A=w(a,"TD",{class:!0});var g=D(A);P=M(g,p),g.forEach(m),S=F(a),a.forEach(m),this.h()},h(){E(l,"class",f=t[1][t[16]]===t[2][t[16]]?"bg-[#d1ecff]":"bg-[#ffd1bd]"),E(A,"class",y=t[1][t[16]]===t[2][t[16]]?"bg-[#d1ecff]":"bg-[#ffd1bd]")},m(u,a){z(u,e,a),o(e,s),o(s,n),o(e,i),o(e,l),o(l,_),o(e,T),o(e,A),o(A,P),o(e,S)},p(u,a){a&1&&c!==(c=u[14]+"")&&K(n,c),a&2&&h!==(h=ae(u[1][u[16]])+"")&&K(_,h),a&6&&f!==(f=u[1][u[16]]===u[2][u[16]]?"bg-[#d1ecff]":"bg-[#ffd1bd]")&&E(l,"class",f),a&4&&p!==(p=ae(u[2][u[16]])+"")&&K(P,p),a&6&&y!==(y=u[1][u[16]]===u[2][u[16]]?"bg-[#d1ecff]":"bg-[#ffd1bd]")&&E(A,"class",y)},d(u){u&&m(e)}}}function He(t){let e,s,c,n,i,l,h,_,f=(typeof t[4]=="number"?t[4].toFixed(2):t[4])+"",T,A,p,P,y,S,u="F1 Score is a scoring metric that compensates for class imbalance.",a,$,d,g=(typeof t[5]=="number"?t[5].toFixed(2):t[5])+"",C,G,k,O,ie,j,me="Recall is only concerned about detecting people who defaulted. It does not care how many correct PAID predictions we made.",te,B,Y,pe="<tr><th>ID</th> <th>MODEL PREDICTION</th> <th>CORRECT ANSWER</th></tr>",ce,J,U;P=new re({props:{icon:be,class:"icon-info",style:"color: rgba(0, 0, 0, 0.5);"}}),O=new re({props:{icon:be,class:"icon-info",style:"color: rgba(0, 0, 0, 0.5);"}});let W=we(t[0]),N=[];for(let r=0;r<W.length;r+=1)N[r]=$e(Ee(t,W,r));return{c(){e=v("h2"),s=H("Model got an accuracy of "),c=H(t[3]),n=H("%"),i=R(),l=v("div"),h=v("span"),_=H("F1 score: "),T=H(f),A=R(),p=v("span"),Q(P.$$.fragment),y=R(),S=v("span"),S.textContent=u,a=R(),$=v("span"),d=H("Recall: "),C=H(g),G=R(),k=v("span"),Q(O.$$.fragment),ie=R(),j=v("span"),j.textContent=me,te=R(),B=v("table"),Y=v("thead"),Y.innerHTML=pe,ce=R(),J=v("tbody");for(let r=0;r<N.length;r+=1)N[r].c();this.h()},l(r){e=w(r,"H2",{class:!0});var I=D(e);s=M(I,"Model got an accuracy of "),c=M(I,t[3]),n=M(I,"%"),I.forEach(m),i=F(r),l=w(r,"DIV",{class:!0});var b=D(l);h=w(b,"SPAN",{class:!0});var q=D(h);_=M(q,"F1 score: "),T=M(q,f),A=F(q),p=w(q,"SPAN",{class:!0});var se=D(p);X(P.$$.fragment,se),y=F(se),S=w(se,"SPAN",{class:!0,"data-svelte-h":!0}),oe(S)!=="svelte-91iaii"&&(S.textContent=u),se.forEach(m),q.forEach(m),a=F(b),$=w(b,"SPAN",{class:!0});var ee=D($);d=M(ee,"Recall: "),C=M(ee,g),G=F(ee),k=w(ee,"SPAN",{class:!0});var ne=D(k);X(O.$$.fragment,ne),ie=F(ne),j=w(ne,"SPAN",{class:!0,"data-svelte-h":!0}),oe(j)!=="svelte-pkft36"&&(j.textContent=me),ne.forEach(m),ee.forEach(m),b.forEach(m),te=F(r),B=w(r,"TABLE",{class:!0});var le=D(B);Y=w(le,"THEAD",{"data-svelte-h":!0}),oe(Y)!=="svelte-17iv0e1"&&(Y.innerHTML=pe),ce=F(le),J=w(le,"TBODY",{});var ge=D(J);for(let fe=0;fe<N.length;fe+=1)N[fe].l(ge);ge.forEach(m),le.forEach(m),this.h()},h(){E(e,"class","font-sans text-[28px] text-black mt-4"),E(S,"class","tooltiptext svelte-b25uzq"),E(p,"class","tooltip svelte-b25uzq"),E(h,"class","text-black font-sans mr-4"),E(j,"class","tooltiptext svelte-b25uzq"),E(k,"class","tooltip svelte-b25uzq"),E($,"class","text-black font-sans"),E(l,"class","my-2 mb-4"),E(B,"class","w-full")},m(r,I){z(r,e,I),o(e,s),o(e,c),o(e,n),z(r,i,I),z(r,l,I),o(l,h),o(h,_),o(h,T),o(h,A),o(h,p),Z(P,p,null),o(p,y),o(p,S),o(l,a),o(l,$),o($,d),o($,C),o($,G),o($,k),Z(O,k,null),o(k,ie),o(k,j),z(r,te,I),z(r,B,I),o(B,Y),o(B,ce),o(B,J);for(let b=0;b<N.length;b+=1)N[b]&&N[b].m(J,null);U=!0},p(r,[I]){if((!U||I&8)&&K(c,r[3]),(!U||I&16)&&f!==(f=(typeof r[4]=="number"?r[4].toFixed(2):r[4])+"")&&K(T,f),(!U||I&32)&&g!==(g=(typeof r[5]=="number"?r[5].toFixed(2):r[5])+"")&&K(C,g),I&7){W=we(r[0]);let b;for(b=0;b<W.length;b+=1){const q=Ee(r,W,b);N[b]?N[b].p(q,I):(N[b]=$e(q),N[b].c(),N[b].m(J,null))}for(;b<N.length;b+=1)N[b].d(1);N.length=W.length}},i(r){U||(L(P.$$.fragment,r),L(O.$$.fragment,r),U=!0)},o(r){V(P.$$.fragment,r),V(O.$$.fragment,r),U=!1},d(r){r&&(m(e),m(i),m(l),m(te),m(B)),x(P),x(O),Se(N,r)}}}function ae(t){return t===0?"PAID":"DEFAULTED"}function Me(t,e,s){let{ids:c}=e,{predictions:n}=e,{answers:i}=e,l=0,h=0,_=0,f=0,T=0,A="NA",p="NA";function P(){l=0,h=0,_=0,f=0,n.forEach((a,$)=>{const d=i[$];d===0?a===0?h+=1:_+=1:d===1&&(a===0?f+=1:l+=1)}),y(),S(),u()}function y(){const a=l+h+_+f;s(3,T=a>0?(l+h)/a*100:0)}function S(){const a=l/(l+_)||0,$=l/(l+f)||0;s(4,A=a+$!==0?2*a*$/(a+$):"NA")}function u(){s(5,p=l/(l+f)||"NA")}return t.$$set=a=>{"ids"in a&&s(0,c=a.ids),"predictions"in a&&s(1,n=a.predictions),"answers"in a&&s(2,i=a.answers)},t.$$.update=()=>{t.$$.dirty&6&&n&&i&&P()},[c,n,i,T,A,p]}class Oe extends de{constructor(e){super(),he(this,e,Me,He,ue,{ids:0,predictions:1,answers:2})}}function Ce(t){let e,s,c;return s=new Oe({props:{predictions:t[5],answers:t[4],ids:t[3]}}),{c(){e=v("div"),Q(s.$$.fragment),this.h()},l(n){e=w(n,"DIV",{id:!0,class:!0});var i=D(e);X(s.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"id","predictions"),E(e,"class","w-full h-full")},m(n,i){z(n,e,i),Z(s,e,null),c=!0},p(n,i){const l={};i&32&&(l.predictions=n[5]),i&16&&(l.answers=n[4]),i&8&&(l.ids=n[3]),s.$set(l)},i(n){c||(L(s.$$.fragment,n),c=!0)},o(n){V(s.$$.fragment,n),c=!1},d(n){n&&m(e),x(s)}}}function Be(t){let e,s,c="Sample of 10 clients:",n,i,l,h,_,f,T,A,p,P,y,S,u,a,$;T=new re({props:{icon:Te,class:"w-[1em] h-[1em] px-2 inline"}}),y=new re({props:{icon:Ae,class:"w-[1em] h-[1em] px-2 inline"}});let d=typeof t[5]<"u"&&Ce(t);return{c(){e=v("div"),s=v("h2"),s.textContent=c,n=R(),i=v("div"),l=new Ne(!1),h=R(),_=v("button"),f=H("Get new Sample"),Q(T.$$.fragment),A=R(),p=v("button"),P=H("Run Prediction"),Q(y.$$.fragment),S=R(),d&&d.c(),this.h()},l(g){e=w(g,"DIV",{id:!0,class:!0});var C=D(e);s=w(C,"H2",{class:!0,"data-svelte-h":!0}),oe(s)!=="svelte-95kywu"&&(s.textContent=c),n=F(C),i=w(C,"DIV",{class:!0});var G=D(i);l=Ie(G,!1),G.forEach(m),h=F(C),_=w(C,"BUTTON",{class:!0});var k=D(_);f=M(k,"Get new Sample"),X(T.$$.fragment,k),k.forEach(m),A=F(C),p=w(C,"BUTTON",{class:!0});var O=D(p);P=M(O,"Run Prediction"),X(y.$$.fragment,O),O.forEach(m),S=F(C),d&&d.l(C),C.forEach(m),this.h()},h(){E(s,"class","my-4 font-sans text-[28px] text-black"),l.a=null,E(i,"class","h-[300px] w-full overflow-scroll"),E(_,"class","bg-[#d3368240] text-[#d33682] svelte-zbe35h"),E(p,"class","bg-[#85990040] text-[#859900] svelte-zbe35h"),E(e,"id","list"),E(e,"class","w-full mt-16 min-h-[75vh]")},m(g,C){z(g,e,C),o(e,s),o(e,n),o(e,i),l.m(t[2],i),o(e,h),o(e,_),o(_,f),Z(T,_,null),o(e,A),o(e,p),o(p,P),Z(y,p,null),o(e,S),d&&d.m(e,null),u=!0,a||($=[_e(_,"click",t[0]),_e(p,"click",t[1])],a=!0)},p(g,[C]){(!u||C&4)&&l.p(g[2]),typeof g[5]<"u"?d?(d.p(g,C),C&32&&L(d,1)):(d=Ce(g),d.c(),L(d,1),d.m(e,null)):d&&(Re(),V(d,1,1,()=>{d=null}),Fe())},i(g){u||(L(T.$$.fragment,g),L(y.$$.fragment,g),L(d),u=!0)},o(g){V(T.$$.fragment,g),V(y.$$.fragment,g),V(d),u=!1},d(g){g&&m(e),x(T),x(y),d&&d.d(),a=!1,Pe($)}}}function ze(){const t=document.getElementById("predictions");if(t){const c=t.getBoundingClientRect().top+window.scrollY-200;window.scrollTo({top:c,behavior:"smooth"})}}function Le(t,e,s){let c="loading sample customers...",n,i,l;async function h(){s(3,n=void 0),s(4,i=void 0),s(5,l=void 0),fetch("http://0.0.0.0:5000/getSample").then(f=>f.text()).then(f=>{s(2,c=f)}).catch(f=>console.error("Error:",f))}async function _(){fetch("http://0.0.0.0:5000/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customersTable:c})}).then(f=>{if(!f.ok)throw new Error(f.body);return f.json()}).then(f=>{s(3,n=f.ids),s(4,i=f.answers),s(5,l=f.predictions),setTimeout(ze,0)}).catch(f=>{console.error("Error: Could not get predictions - "+f)})}return ye(()=>{h()}),ve.add(Ae),ve.add(Te),ke.watch(),[h,_,c,n,i,l]}class qe extends de{constructor(e){super(),he(this,e,Le,Be,ue,{getCustomers:0,runPredictions:1})}get getCustomers(){return this.$$.ctx[0]}get runPredictions(){return this.$$.ctx[1]}}function Ve(t){let e,s,c;return s=new qe({}),{c(){e=v("main"),Q(s.$$.fragment),this.h()},l(n){e=w(n,"MAIN",{class:!0});var i=D(e);X(s.$$.fragment,i),i.forEach(m),this.h()},h(){E(e,"class","w-[70%] h-full my-0 mx-auto")},m(n,i){z(n,e,i),Z(s,e,null),c=!0},p:De,i(n){c||(L(s.$$.fragment,n),c=!0)},o(n){V(s.$$.fragment,n),c=!1},d(n){n&&m(e),x(s)}}}class Ye extends de{constructor(e){super(),he(this,e,null,Ve,ue,{})}}export{Ye as component};
